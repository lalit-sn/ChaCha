# CHACHA20 – Verilog Implementation

This repository provides a modular Verilog implementation of the **ChaCha20 stream cipher**, originally designed by Daniel J. Bernstein. The project targets secure hardware design and simulation, with potential extensions for FPGA/ASIC acceleration and cryptographic IP development.

---

## Project Objectives

Planned outcomes:
- Build a modular Verilog implementation of ChaCha20
- Begin from the atomic **Quarter Round (QR)** and construct the complete core
- Provide testbenches for simulation-based verification

---

## Repository Structure

CHACHA20/
- QR_ChaCha.v # Quarter Round module
- Core_ChaCha.v #  Full ChaCha20 block processor
- top_ChaCha.v #  Top-level module with I/O wrapper
- tb_ChaCha.v #  Testbench for full integration
- README.md # Project documentation


---

## Module Description

### 1. `QR_ChaCha.v`: ChaCha Quarter Round

Implements one **Quarter Round** operation on four 32-bit state words `a`, `b`, `c`, and `d`. This building block is used repeatedly in ChaCha20’s 512-bit transformation rounds.

The quarter round performs the following sequence:

- a += b; d ^= a; d <<< 16;
- c += d; b ^= c; b <<< 12;
- a += b; d ^= a; d <<< 8;
- c += d; b ^= c; b <<< 7;

Each line uses:
- 32-bit modular addition
- Bitwise XOR
- Left rotation (circular shift)

---

### 2. `tb_ChaCha.v`: Testbench
Drives the top_ChaCha.v module with ChaCha20 initialization vectors and input keys. This module is intended for:
- Cycle-by-cycle simulation
- Observing round completion
- Comparing generated keystreams with known outputs

---

### 3. `Core_ChaCha.v`: ChaCha20 Core Logic
Implements the full 20-round transformation of the ChaCha20 algorithm. The state matrix is:
- Initialized using constants, key, counter, and nonce
- Transformed using 10 column + 10 diagonal double rounds
- Finalized by adding the input state to the transformed state

---

### 4. `top_ChaCha.v`: Integration Wrapper
Acts as the top-level RTL module:
- Accepts key, nonce, and control signals
- Passes data to the core.v module
- Returns keystream blocks for encryption/decryption
  
---

## Overview of ChaCha20 Algorithm

ChaCha20 is a stream cipher based on 512-bit state transformations. The state includes:
- 4 constant words ("expand 32-byte k")
- 8 key words (256-bit key)
- 1 counter word (32-bit block counter)
- 3 nonce words (96-bit nonce)

Each encryption block is generated by:
- Running 20 rounds (10 column + 10 diagonal rounds)
- Each round applies multiple Quarter Rounds
- Final state is added to the original state
- The 512-bit state is serialized to generate keystream

Each round is composed of multiple **quarter round (QR)** operations that perform modular addition, XOR, and bitwise left rotations to ensure high diffusion and security.

### ChaCha20 Highlights

- Designed for **high performance** on both hardware and software platforms
- **Secure** against timing attacks and cache side-channel attacks
- Utilizes only three operations:
  - Addition modulo 2³²
  - Bitwise XOR
  - Bitwise rotation
- Requires no lookup tables or S-boxes (unlike AES)
- Simple, regular structure suitable for efficient hardware implementation

### Real-World Usage

ChaCha20 is widely adopted in modern cryptographic systems:

- **TLS encryption** (used by Google, Cloudflare)
- **OpenSSH** secure shell protocol
- **Disk encryption** on Android and iOS
- **Google’s QUIC protocol** for fast internet transport

### References
- https://cr.yp.to/chacha/chacha-20080128.pdf
- https://datatracker.ietf.org/doc/html/rfc8439
  
